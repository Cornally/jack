@import '../settings/all';

/////////////////////////
// Twelve Column Grid
/////////////////////////

// Loop through all of our breakpoint sizes in `utils/_sizes.scss`,
// create a media query for each respective breakpoint size,
// Loop through each column and set the flex-basis value.

@mixin grid {
    $column_count: 12;
    $column_size: 100% / $column_count;
    @each $size, $px in $sizes_break {

        // Build out column widths for each breakpoint size
        @media (min-width: $px) {
            @for $i from 0 through $column_count {
                .#{$prefix_component_grid}col-#{$size}-#{$i} {
                    flex-basis: $column_size * $i;
                    // Allow '.col-size-0' for columns that should
                    // retain the width of their contents.
                    @if $i == 0 {
                        max-width: 100%;
                    }
                }
            }
        }

        // Hide bits
        @media (min-width: $px) {
            .#{$prefix_component_grid}col-#{$size}--hidden {
                display: none !important;
            }
        }

        // Show bits
        @media (min-width: $px) {
            .#{$prefix_component_grid}col-#{$size}--visible {
                display: initial !important;
            }
        }

        // Preserve a smaller gutter on smaller screens
        @if $px > 768 {
            @media (min-width: $px) {
                .#{$prefix_component_grid}container {
                    max-width: $px - 80px;
                }
            }
        } @else {
            .#{$prefix_component_grid}container {
                max-width: 95%;
            }
        }


    }
}

@if $include_component_grid {

    $grid_border: $color_brand_primary;
    $grid_gap: $size_gap;

    .#{$prefix_component_grid}row {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;

        // Apply space between the contained elements
        &.#{$prefix_component_grid}row--space-between {
            justify-content: space-between;
        }

        // Apply space around the contained elements
        &.#{$prefix_component_grid}row--space-around {
            justify-content: space-around;
        }

        // Flip the order of your row
        &.#{$prefix_component_grid}row--reverse {
            flex-direction: row-reverse;
        }

        // Do not wrap columns in row
        &.#{$prefix_component_grid}row--no-wrap {
            flex-wrap: nowrap;
        }

        // Stretch the size of the content in the columns so they're the same width/height
        &.#{$prefix_component_grid}row--flex {
            [class^=#{$prefix_component_grid}col-] { display: flex; }
            [class^=#{$prefix_component_grid}col-] > * { flex: 1 1 0; }
        }

        // Add a hairline border
        &.#{$prefix_component_grid}row--border {
            border: 1px solid $grid_border;
        }

        // Align the content to the left (default)
        &.#{$prefix_component_grid}row--align-left {
            justify-content: flex-start;
        }

        // Align the content to the right
        &.#{$prefix_component_grid}row--align-right {
            justify-content: flex-end;
        }

        // Add a spacing gap around top and bottom
        &.#{$prefix_component_grid}row--gap {
            margin: auto -1 * $grid_gap;

            > [class^=#{$prefix_component_grid}col-] {
                padding: $grid_gap;
            }
        }

        // Add a spacing gap horizontally between cols
        &.#{$prefix_component_grid}row--col-hgap {
            margin-left: -1 * $grid_gap;
            margin-right: -1 * $grid_gap;

            > [class^=#{$prefix_component_grid}col-] {
                padding-left: $grid_gap;
                padding-right: $grid_gap;
            }
        }

        // Add a spacing gap vertically between cols
        &.#{$prefix_component_grid}row--col-vgap {
            margin-top: -1 * $grid_gap;
            margin-bottom: -1 * $grid_gap;

            > [class^=#{$prefix_component_grid}col-] {
                padding-top: $grid_gap;
                padding-bottom: $grid_gap;
            }
        }
    }

    @include grid;
}